### 🚀 예약 몰림 시나리오 테스트
### 한 가게에 동시에 많은 예약이 몰리는 상황을 시뮬레이션

@baseUrl = https://reservation-service.team-fog.com
@contentType = application/json
@accessToken = your-access-token-here

### 1. 가게 정보 조회 (총 좌석 수 확인)
GET {{baseUrl}}/api/stores/store001
Authorization: Bearer {{accessToken}}

### 2. 현재 예약 현황 조회
GET {{baseUrl}}/api/bookings/store/store001/date/2024-01-20
Authorization: Bearer {{accessToken}}

### 3. 기본 예약 생성 (정상 케이스)
POST {{baseUrl}}/api/bookings
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "userId": "user001",
  "storeId": "store001",
  "bookingDate": "2024-01-20",
  "count": 2
}

### 4. 용량 한계 테스트 (총 좌석 수 초과)
POST {{baseUrl}}/api/bookings
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "userId": "user002",
  "storeId": "store001",
  "bookingDate": "2024-01-20",
  "count": 1000
}

### 5. 동시 예약 테스트 (Race Condition 시뮬레이션)
### 이 요청을 여러 번 동시에 실행하여 동시성 문제 테스트

POST {{baseUrl}}/api/bookings
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "userId": "user003",
  "storeId": "store001",
  "bookingDate": "2024-01-20",
  "count": 4
}

### 6. 잘못된 데이터로 에러 테스트
POST {{baseUrl}}/api/bookings
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "userId": "",
  "storeId": "invalid_store",
  "bookingDate": "invalid_date",
  "count": -1
}

### 7. 예약 취소 테스트
DELETE {{baseUrl}}/api/bookings/booking001
Authorization: Bearer {{accessToken}}

### 8. 예약 수정 테스트
PUT {{baseUrl}}/api/bookings/booking001
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "count": 6
}

### 9. 대기열 상태 확인
GET {{baseUrl}}/api/bookings/store/store001/queue
Authorization: Bearer {{accessToken}}

### 10. 실시간 예약 현황 대시보드
GET {{baseUrl}}/api/bookings/dashboard/store/store001
Authorization: Bearer {{accessToken}}

### 11. 예약 통계 조회
GET {{baseUrl}}/api/bookings/stats/store/store001/date/2024-01-20
Authorization: Bearer {{accessToken}}

### 12. 자동 예약 완료 처리 테스트
POST {{baseUrl}}/api/bookings/auto-complete
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "storeId": "store001",
  "bookingDate": "2024-01-20"
}

### 13. 긴급 예약 완료 처리 테스트
POST {{baseUrl}}/api/bookings/emergency-complete
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "storeId": "store001",
  "bookingDate": "2024-01-20",
  "reason": "시스템 과부하로 인한 긴급 처리"
}

### 14. 서비스 헬스체크
GET {{baseUrl}}/health

### 15. 메트릭 조회 (성능 모니터링)
GET {{baseUrl}}/actuator/metrics/http.server.requests
Authorization: Bearer {{accessToken}}

### 16. 데이터베이스 연결 상태 확인
GET {{baseUrl}}/actuator/health/db
Authorization: Bearer {{accessToken}}

### 17. 예약 서비스 로그 확인
GET {{baseUrl}}/actuator/loggers/com.restaurant.reservation
Authorization: Bearer {{accessToken}}

### 18. 환경 정보 확인
GET {{baseUrl}}/actuator/env
Authorization: Bearer {{accessToken}}

### 19. 스레드 덤프 (성능 분석용)
GET {{baseUrl}}/actuator/threaddump
Authorization: Bearer {{accessToken}}

### 20. 힙 덤프 (메모리 분석용)
GET {{baseUrl}}/actuator/heapdump
Authorization: Bearer {{accessToken}}
