Data Guard 구성 절차 (요약)
1. 기본 설정 (이미 하신 부분)

Primary / Standby 리스너 및 tnsnames 설정

아카이브 로그 모드, force logging 설정

Standby DB 생성 (RMAN duplicate 등)

2. 파라미터 설정

Primary DB:

ALTER SYSTEM SET log_archive_config='DG_CONFIG=(PRIM,STDB)';
ALTER SYSTEM SET log_archive_dest_2='SERVICE=STDB ASYNC VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) DB_UNIQUE_NAME=STDB';
ALTER SYSTEM SET fal_server=STDB;
ALTER SYSTEM SET fal_client=PRIM;


Standby DB:

ALTER SYSTEM SET log_archive_config='DG_CONFIG=(PRIM,STDB)';
ALTER SYSTEM SET log_archive_dest_2='SERVICE=PRIM ASYNC VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) DB_UNIQUE_NAME=PRIM';
ALTER SYSTEM SET fal_server=PRIM;
ALTER SYSTEM SET fal_client=STDB;

3. Data Guard Broker 활성화

양쪽 DB에서:

ALTER SYSTEM SET dg_broker_start=true;

4. DGMGRL 접속 및 구성

Primary 서버에서 실행:

dgmgrl sys@PRIM


구성 생성:

CREATE CONFIGURATION my_dg_config AS PRIMARY DATABASE IS PRIM CONNECT IDENTIFIER IS PRIM;
ADD DATABASE STDB AS CONNECT IDENTIFIER IS STDB MAINTAINED AS PHYSICAL;
ENABLE CONFIGURATION;

5. 상태 확인
SHOW CONFIGURATION;
SHOW DATABASE VERBOSE PRIM;
SHOW DATABASE VERBOSE STDB;
